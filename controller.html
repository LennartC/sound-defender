<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<script src="/socket.io/socket.io.js"></script>
	<script src="js/elem.js"></script>
	<style type="text/css">
		td{
			width:100px;
			text-align: center;
			position: relative;
		}
		td img{
			width:80px;
		}
		td .meter{
			position: absolute;
			z-index: -1;
			height: 10px;
			width: 10px;
			background-color: gray;
			top:5px;
			left: 0;
		}
		.panel{
			float: left;
			text-align: right;
		}
		input[type=range]{
			width:400px;
		}
	</style>
	<script type="text/javascript">
	var socket = io.connect('/');

	function sendScale(){
		var scale=parseFloat(document.getElem("#scaler").value);
		console.log(scale);
		socket.emit("admin",{'scale':scale});
	}
	function sendLoudness(){
		var loud=parseInt(document.getElem("#loud").value,10);
		loud=1100-loud;
		console.log(loud);
		socket.emit("admin",{'loudness':loud});
	}
	var meters=null;
	document.ready(function(){

		meters=document.getElemAll('div.meter');
		setInterval(decay,10);

		document.getElem("#scaler").on("change",sendScale);
		document.getElem("#loud").on("change",sendLoudness);
	});
	function decay(){
		meters.forEach(function(line){
			var w=parseInt(line.offsetWidth);
			if(w>1){
				w-=2;
				line.style.width=w+"px";
			}
		});
	}
	</script>
</head>
<body>

<div class="panel">
	<label>Enemy scale (0.5 - 5)</label>
	<input type="range" value="1" min="0.5" max="5" step="0.1" id="scaler">
	<br/>
	<label>Mountain scale</label>
	<input type="range" value="400" min="100" max="1000" step="1" id="loud">
	<br/>
</div>
</body>
</html>